apiVersion: v1
kind: Pod
metadata:
  name: netcheck
spec:
  securityContext:
    seccompProfile:
      type: RuntimeDefault
  containers:
    - name: curl
      image: curlimages/curl:8.9.1
      command: ["sh","-c","curl -fsS http://api:8080/health || echo blocked; sleep 5"]
      securityContext:
        runAsUser: 1000
        runAsNonRoot: true
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        capabilities:
          drop: ["ALL"]
  restartPolicy: Never